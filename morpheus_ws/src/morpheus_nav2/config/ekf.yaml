ekf:
  ros__parameters:
    #################################################################
    # Basic Settings
    #################################################################
    frequency: 50.0
    two_d_mode: true
    publish_tf: true
    print_diagnostics: true
    # debug: true
    # debug_out_file: /tmp/ekf_debug.txt

    #################################################################
    # Coordinate Frames
    #################################################################
    map_frame: map
    odom_frame: odom
    base_link_frame: chassis_link
    world_frame: odom   # Nav2 期望 odom 为“世界系（局部漂移）”

    #################################################################
    # # Sensor 1: Gazebo Odometry (nav_msgs/Odometry)
    # Topic comes from the bridge:
    #   /world/marsyard2022/model/morpheus_rover/odometry
    # Use x, y, yaw and vx, vy, yaw_rate
    #################################################################
    odom0: /world/marsyard2022/model/morpheus_rover/odometry
    odom0_config: [true,  true,  false,   # x, y, z (use only planar motion)
                   false, false, true,    # roll, pitch, yaw
                   true,  true,  false,   # vx, vy, vz
                   false, false, true,    # vroll, vpitch, vyaw
                   false, false, false]   # ax, ay, az
    odom0_differential: false
    odom0_relative:     false
    # odom0_queue_size: 10

    #################################################################
    # Sensor 2: IMU (sensor_msgs/Imu)
    # Use only yaw, yaw rate, and linear acceleration (for EKF integration)
    #################################################################
    imu0: /imu
    imu0_config: [false, false, false,   # position x y z
                  false, false, true,    # orientation roll pitch yaw（只用 yaw）
                  false, false, false,   # velocity
                  false, false, true,    # angular velocity (use only yaw rate)
                  true,  true,  true]    # acceleration ax ay az
    imu0_differential: false
    imu0_remove_gravitational_acceleration: true
    # imu0_queue_size: 50

    #################################################################
    # Other Common Parameters (tune as needed)
    #################################################################
    sensor_timeout: 0.1
    # transform_time_offset: 0.0
    # reset_on_time_jump: true
